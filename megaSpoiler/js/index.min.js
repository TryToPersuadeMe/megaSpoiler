class Accordion{constructor(t){this.$wrapper=document.querySelectorAll(t.parent),this.time=500,this.toggleStatusAttribute=t.toggleStatusAttribute,this.$wrapper.forEach(t=>{this.handleClick(t),this.setupToggleDataset(t),this.styleLastAccodrions(t)})}handleClick(t){t.addEventListener("click",t=>this.toggle(t))}styleLastAccodrions(t){t.querySelectorAll(`[${this.toggleStatusAttribute}]`).forEach(t=>{0===t.querySelectorAll(`[${this.toggleStatusAttribute}]`).length&&t.classList.add("lastElement")})}setupToggleDataset(t){this.accordion=t.querySelectorAll(".accordion"),this.cell=t.querySelectorAll(".accordion__cell"),this.biggerlength=Math.max(this.accordion.length,this.cell.length);for(let t=0;t<this.biggerlength;t++)this.accordion[t]&&0!=t&&!this.accordion[t].classList.contains("lastElement")&&this.accordion[t].setAttribute(this.toggleStatusAttribute,"false"),this.cell[t]&&!this.cell[t].classList.contains("lastElement")&&this.cell[t].setAttribute(this.toggleStatusAttribute,"false")}closeAllOpenedLists(t,e,s){if(this.$openedLists=s.currentTarget.querySelectorAll(`[${this.toggleStatusAttribute}="true"]`),this.$prevElement=[].concat(...this.$openedLists),this.$prevElement.length){(t=>{let e=[];if(!t.parentNode)return e;let s=t.parentNode.firstElementChild;do{s!=t&&e.push(s)}while(s=s.nextElementSibling);return e})(e).forEach(t=>{"true"===t.getAttribute(this.toggleStatusAttribute)&&this.hide(t.querySelector(`[${this.toggleStatusAttribute}]`),t,s)})}}toggle(t){this.$parent_cell=t.target.closest(`[${this.toggleStatusAttribute}]`),this.$parent_cell.classList.contains("lastElement")||(this.$inner_cell=this.$parent_cell.querySelector(`[${this.toggleStatusAttribute}]`),"false"===this.$parent_cell.getAttribute(this.toggleStatusAttribute)?(this.closeAllOpenedLists("",this.$parent_cell,t),this.activate(this.$inner_cell,t)):this.hide(this.$inner_cell,this.$parent_cell,t))}activate(t,e){this.$parent_cell.setAttribute(this.toggleStatusAttribute,"true"),this.$parent_cell.classList.add("toggleArrow"),t.classList.add("active"),Object.assign(t.style,{transition:.001*this.time+"s ease",overflow:"hidden",maxHeight:"0px"});new Promise((e,s)=>{setTimeout(()=>{t.style.maxHeight=t.scrollHeight+"px",e(t)},0)}).then(t=>{setTimeout(()=>{t.style.removeProperty("max-height"),t.style.removeProperty("overflow"),e.stopPropagation()},this.time)})}hide(t,e=this.$parent_cell,s){Object.assign(t.style,{overflow:"hidden",maxHeight:t.scrollHeight+"px"});const r=new Promise((e,s)=>{setTimeout(()=>{t.style.maxHeight="0",e(t)},0)});setTimeout(()=>{e.setAttribute(this.toggleStatusAttribute,"false"),e.classList.remove("toggleArrow")},50),r.then(t=>{setTimeout(()=>{e.setAttribute(this.toggleStatusAttribute,"false"),e.classList.remove("toggleArrow"),t.classList.remove("active"),s.stopPropagation()},this.time)})}}const accordion=new Accordion({parent:".spoiler",toggleStatusAttribute:"data-list_was_toggled"});class ProgressBar{constructor(t){this.$wrapper=document.querySelectorAll(t.parent),this.$progressBar=t.progressBar,this.$wrapper.forEach(e=>{this.$allPercentsData=e.querySelectorAll(`[${t.currentPercents}]`),this.setUp(this.$allPercentsData,e)})}setUp(t,e){this.$progressBar_line=e.querySelectorAll(this.$progressBar),t.forEach((t,e)=>{this.pureNumber=t.innerHTML.replace(/\D+/g,""),this.$progressBar_line[e].style.width=100-this.pureNumber+"%"})}}const progressBar=new ProgressBar({parent:".spoiler",currentPercents:"data-progressBar",progressBar:".progressBar__activeState"});